import{_ as t,a0 as p,a1 as e,a2 as n,a3 as s,a6 as o,a7 as c,a4 as l,C as i}from"./framework-16947f8e.js";const u={},k=n("h1",{id:"äº‹ä»¶å¾ªç¯æœºåˆ¶",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#äº‹ä»¶å¾ªç¯æœºåˆ¶","aria-hidden":"true"},"#"),s(" äº‹ä»¶å¾ªç¯æœºåˆ¶")],-1),d=n("p",null,"åœ¨äº†è§£äº‹ä»¶å¾ªç¯æœºåˆ¶ä¹‹å‰ï¼Œéœ€è¦äº†è§£ï¼š",-1),r=n("li",null,[n("p",null,"åŒæ­¥ä»»åŠ¡"),n("p",null,"åœ¨ä¸»çº¿ç¨‹ä¸Šæ’é˜Ÿçš„ä»»åŠ¡ï¼Œå‰ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•ï¼Œæ‰èƒ½ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡")],-1),v=n("p",null,"å¼‚æ­¥ä»»åŠ¡",-1),m=n("li",null,[n("p",null,"å›è°ƒå‡½æ•°")],-1),b=n("li",null,[n("p",null,"js åœ¨æµè§ˆå™¨ä¸­çš„æ‰§è¡Œæœºåˆ¶")],-1),y=l(`<h2 id="æ¦‚è¿°" tabindex="-1"><a class="header-anchor" href="#æ¦‚è¿°" aria-hidden="true">#</a> æ¦‚è¿°</h2><p>äº‹ä»¶å¾ªç¯æœºåˆ¶æ˜¯ html æå‡ºçš„æ¦‚å¿µï¼Œæ˜¯ä¸ºäº†åè°ƒäº‹ä»¶ï¼Œç”¨æˆ·äº¤äº’ï¼Œè„šæœ¬ï¼Œæ¸²æŸ“ï¼Œç½‘ç»œç­‰ï¼Œä»æ•´ä½“ä¸Šå‘Šè¯‰äº†æˆ‘ä»¬æ‰€å†™ JS ä»£ç çš„æ‰§è¡Œé¡ºåºã€‚</p><p>JS çš„ä¸€å¤§ç‰¹ç‚¹å°±æ˜¯å•çº¿ç¨‹ï¼Œå¹¶æ²¡æœ‰ä¸“é—¨çš„å¼‚æ­¥çº¿ç¨‹ã€‚ä½†å®ƒä¹Ÿæ”¯æŒå¼‚æ­¥æ“ä½œï¼ˆæš‚æ—¶ç†è§£ä¸ºåˆå¼€äº†ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼‰ï¼Œè¿™ä¸ªå¼‚æ­¥æ“ä½œæ˜¯æµè§ˆå™¨æä¾›çš„ï¼Œä»–ä¼šæ”¾åˆ°æµè§ˆå™¨çš„å¾ªç¯é˜Ÿåˆ—é‡Œé¢ï¼Œç­‰å¾…ä¸»çº¿ç¨‹æ ˆå‘å‡ºå‘½ä»¤æ¥æ‰§è¡Œè¿™ä¸ªé˜Ÿåˆ—é‡Œé¢çš„äº‹ä»¶ã€‚</p><p>åœ¨ JS ä»£ç æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡å‡½æ•°çš„è°ƒç”¨æ ˆæ¥å†³è§£å‡½æ•°çš„æ‰§è¡Œé¡ºåºï¼Œå½“ç„¶ä¹Ÿå­˜åœ¨å¦å¤–ä¸€äº›ç‰¹æ®Šçš„çŠ¶å†µï¼Œé€šè¿‡ä»»åŠ¡é˜Ÿåˆ—ï¼ˆtask queueï¼‰æ¥è§£å†³å¦å¤–ä¸€äº›ä»£ç çš„æ‰§è¡Œã€‚ä»»åŠ¡é˜Ÿåˆ—å¯ä»¥åˆ†ä¸º<code>å®ä»»åŠ¡(macro-task)</code>å’Œ<code>å¾®ä»»åŠ¡(micro-task)</code></p><h2 id="å¼‚æ­¥ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#å¼‚æ­¥ä»»åŠ¡" aria-hidden="true">#</a> å¼‚æ­¥ä»»åŠ¡</h2><p>åœ¨ä¸Šé¢æåˆ°äº†ï¼Œå¼‚æ­¥ä»»åŠ¡æ˜¯ä¸ä¼šç«‹é©¬è¿›å…¥ä¸»çº¿ç¨‹çš„ä»»åŠ¡è€Œæ˜¯è¿›å…¥ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œåªæœ‰ä»»åŠ¡é˜Ÿåˆ—é€šçŸ¥ä¸»çº¿ç¨‹ï¼ŒæŸä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†ï¼Œä»»åŠ¡æ‰ä¼šè¿›å…¥ä¸»çº¿ç¨‹æ‰§è¡Œã€‚å¼‚æ­¥ä»»åŠ¡åˆå¯ä»¥åˆ†ä¸ºï¼šå®ä»»åŠ¡ã€å¾®ä»»åŠ¡</p><h3 id="å®ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#å®ä»»åŠ¡" aria-hidden="true">#</a> å®ä»»åŠ¡</h3><p>å®ä»»åŠ¡å°±æ˜¯æ‰€è°“çš„ä¸»çº¿ç¨‹ï¼Ÿ</p><p>å®ä»»åŠ¡åŒ…å«ï¼šscriptï¼ˆæ•´ä½“ä»£ç ï¼‰ã€setTimeoutã€setIntervalã€setImmediateã€I/Oã€UI rendering</p><h3 id="å¾®ä»»åŠ¡" tabindex="-1"><a class="header-anchor" href="#å¾®ä»»åŠ¡" aria-hidden="true">#</a> å¾®ä»»åŠ¡</h3><p>å¾®ä»»åŠ¡åŒ…å«ï¼šprocess.nextTickã€Promiseã€Object.observe</p><div class="hint-container warning"><p class="hint-container-title">æ³¨æ„</p><p>Promise å’Œ setTimeout ç­‰è¿˜æ˜¯åŒæ­¥çš„ä»£ç ï¼Œç§°ä¸ºä»»åŠ¡æºã€‚è€Œè¿›å…¥ä»»åŠ¡é˜Ÿåˆ—çš„æ˜¯ä»–ä»¬æŒ‡å®šçš„å…·ä½“æ‰€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚Promise å…·ä½“éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ä¾‹å¦‚<code>then</code>å‡½æ•°æ˜¯å¾®ä»»åŠ¡ï¼Œè€Œ setTimeout ä¸­æºå¸¦çš„ä»»åŠ¡æ˜¯å®ä»»åŠ¡ã€‚æ— è®ºæ˜¯å¾®ä»»åŠ¡è¿˜æ˜¯å®ä»»åŠ¡çš„æ‰§è¡Œï¼Œéƒ½éœ€è¦å€ŸåŠ©<code>å‡½æ•°è°ƒç”¨æ ˆ</code>ï¼ˆæ ˆå†…å­˜ï¼‰æ¥å®Œæˆã€‚</p><p>å®ä»»åŠ¡ä¸å¾®ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºï¼šå…ˆæ‰§è¡Œå¾®ä»»åŠ¡ï¼Œå†æ‰§è¡Œå®ä»»åŠ¡</p></div><h3 id="_2023-4-8-æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#_2023-4-8-æ›´æ–°" aria-hidden="true">#</a> 2023.4.8 æ›´æ–°</h3><p>é¢è¯•é¢˜ï¼Œä¸‹é¢è¾“å‡ºçš„ç»“æœ</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asy1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">await</span> <span class="token function">asy2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asy2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">await</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">asy3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">_</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">asy1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">asy3</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ†æï¼š</p><ol><li><p>æ‰§è¡Œå‡½æ•°<code>asy1</code>çš„åŒæ­¥ä»£ç </p></li><li><p>è¾“å‡º 7</p></li><li><p>æ‰§è¡Œå‡½æ•°<code>asy3</code>çš„åŒæ­¥ä»£ç </p></li></ol><p>ç»†åŒ–ä¸Šé¢çš„ä¸‰ç‚¹ï¼š</p><p>æ‰§è¡Œå‡½æ•°<code>asy1</code>çš„åŒæ­¥ä»£ç ï¼Œ<code>è¾“å‡ºç»“æœ1</code>ã€‚</p><p>æ‰§è¡Œå‡½æ•°<code>asy2</code>çš„åŒæ­¥ä»£ç ï¼Œ0 ç§’åå°†è®¡æ—¶å™¨ä¸­çš„å‡½æ•°åŠ å…¥åˆ°å®ä»»åŠ¡é˜Ÿåˆ—ã€‚ç­‰å¾…å‡½æ•°<code>asy2</code>çš„æ‰§è¡Œå®Œæˆåï¼Œå°†<code>è¾“å‡ºç»“æœ2</code>åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚è™½ç„¶å‡½æ•°<code>asy2</code>ä¸­çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œäº†ï¼Œä½†æ˜¯ç”±äº<code>await</code>å…³é”®å­—çš„å­˜åœ¨ï¼Œå®é™…ä¸Šæ˜¯æ²¡æœ‰æ‰§è¡Œå®Œçš„ï¼Œè¿˜æœ‰ä¸€ä¸ª<code>éšå½¢çš„å¾®ä»»åŠ¡</code>å­˜åœ¨ï¼Œæ‰€ä»¥æ­¤æ—¶<code>asy2</code>å¹¶æ²¡æœ‰æ‰§è¡Œå®Œæˆã€‚</p><p>ç›¸å½“äºï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">asy2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//éšå½¢çš„.then</span>
    <span class="token comment">//...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœ 7ã€‚</p><p>å°†è¾“å‡º 6 åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p><p>è‡³æ­¤åŒæ­¥ä»£ç æ‰§è¡Œå®Œæˆï¼Œæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»£ç ã€‚</p><p>æ‰§è¡Œéšå½¢çš„å¾®ä»»åŠ¡ï¼Œæ­¤æ—¶å‡½æ•°<code>asy2</code>æ‰§è¡Œå®Œæˆï¼Œå°†è¾“å‡ºç»“æœ<code>2</code>åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p><p><code>è¾“å‡ºç»“æœ6</code></p><p><code>è¾“å‡ºç»“æœ2</code></p><p>æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ã€‚å°†è¾“å‡ºç»“æœ 3 åŠ å…¥åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—</p><p>æ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œ<code>è¾“å‡ºç»“æœ4</code></p><p>æ‰§è¡Œå®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œ<code>è¾“å‡ºç»“æœ3</code></p><p>æ‰€ä»¥æœ€ç»ˆçš„è¾“å‡ºç»“æœä¸ºï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>1ã€7ã€6ã€2ã€4ã€3
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2023-4-28-æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#_2023-4-28-æ›´æ–°" aria-hidden="true">#</a> 2023.4.28 æ›´æ–°</h3><p>å·¥ä½œä¸­é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;readline&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;fs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> mydata<span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">await</span> <span class="token function">handleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> new_res <span class="token operator">=</span> res <span class="token operator">?</span> res <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	new_res<span class="token punctuation">.</span>preEvalNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token keyword">await</span> <span class="token function">updateData</span><span class="token punctuation">(</span>new_res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;mydata&quot;</span><span class="token punctuation">,</span> mydata<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">handleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		<span class="token literal-property property">input</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;line&quot;</span><span class="token punctuation">,</span> <span class="token parameter">line</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		obj<span class="token punctuation">[</span>line<span class="token punctuation">]</span> <span class="token operator">=</span> line<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">await</span> <span class="token function">updateData</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> mydata<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">updateData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		mydata <span class="token operator">=</span> data<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">Outer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœéå¸¸çš„ä¸å°½äººæ„ã€‚ã€‚ã€‚ã€‚</p><p>é¢„æœŸï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
	a: &#39;a&#39;,
	b: &#39;b&#39;,
	c: &#39;c&#39;,
	preEvalNumber: 1
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç»“æœå´æ˜¯ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>{
	preEvalNumber: 1
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰ç‚¹éš¾å—çš„ï¼Œæ¥ç€æˆ‘å°±å¼€å§‹æ¼«é•¿çš„åˆ†æäº†ã€‚</p><p><strong>4.29:</strong></p><p>è¿‡äº†ä¸€å¤©æ—©ä¸Šï¼Œæˆ‘ç»ˆäºçŸ¥é“äº†ï¼ï¼ï¼</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;line&quot;</span><span class="token punctuation">,</span> <span class="token parameter">line</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	obj<span class="token punctuation">[</span>line<span class="token punctuation">]</span> <span class="token operator">=</span> line<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">await</span> <span class="token function">updateData</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>çœ‹è¿™ä¸€æ®µä»£ç ï¼Œå°è¯•ç€äº†è§£å®ƒçš„ç”¨æ„ï¼Œè¿™æ ·å­å°±å¾ˆå¥½ç†è§£äº†ã€‚</p><p>å®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªè¯»å†™æ–‡ä»¶çš„æ–¹æ³•ï¼Œè€Œè¯»å†™æ–‡ä»¶å˜›ï¼Œæ˜¯éœ€è¦æ—¶é—´çš„ï¼Œæ‰€ä»¥ä¸ºäº†é˜²æ­¢é˜»å¡ï¼Œè‡ªç„¶è€Œç„¶å°±è®¾ç½®æˆäº†å¼‚æ­¥çš„å’¯ã€‚</p><p>å…¶å®æ˜¨å¤©å›°æ‰°æˆ‘çš„åœ°æ–¹å°±æ˜¯è¿™ä¸ª<code>close</code>äº‹ä»¶ï¼Œä»Šå¤©çªç„¶å°±é†’æ‚Ÿäº†ï¼è¯»å†™æ–‡ä»¶æ˜¯éœ€è¦æ—¶é—´çš„å‘€ï¼Œæ‰€ä»¥è¯´è¿™ä¸ª<code>close</code>äº‹ä»¶è§¦å‘çš„æ—¶æœºï¼Œå…¶å®å°±æ˜¯æ–‡ä»¶è¯»å†™å®Œæˆçš„æ—¶æœºã€‚</p><p>éš¾æ€ªæˆ‘æ˜¨å¤©ç›´æ¥å¥—äº†ä¸€å±‚<code>setTimeout</code>æ—¶é—´å†™æˆ 0 æ²¡æœ‰ç”¨å‘¢ï¼ŒåŸæ¥æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»Šå¤©æµ‹è¯•äº†ä¸€ä¸‹ï¼Œ30 å‡ è¡Œçš„æ–‡ä»¶éœ€è¦è‡³å°‘ 4ms çš„æ—¶é—´ï¼Œæ‰€ä»¥ setTimeout çš„æ—¶é—´è®¾ç½®å°±æˆäº†å…³é”®ã€‚ç„¶åå»ç™¾åº¦äº†ä¸€ä¸‹ï¼Œå¤§æ¦‚ä¸€ç§’é’Ÿï¼Œä¹Ÿå°±æ˜¯ 1000msï¼Œå¯ä»¥è¯»å†™æ–‡ä»¶çš„å¤§å°ä¸º 70M å·¦å³ï¼Œæ‰€ä»¥æˆ‘çš„è§£å†³æ–¹æ¡ˆï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> new_res <span class="token operator">=</span> res <span class="token operator">?</span> res <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	new_res<span class="token punctuation">.</span>preEvalNumber <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

	<span class="token keyword">await</span> <span class="token function">updateData</span><span class="token punctuation">(</span>new_res<span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">const</span> latest_res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">readData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;latest_res&quot;</span><span class="token punctuation">,</span> latest_res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>mydata<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>5.27 æ›´æ–°</strong></p><p>ä»Šå¤©åœ¨çº ç»“ Promise çš„æ—¶å€™ï¼Œçªç„¶å¯¹ä¸Šé¢çš„ä¾‹å­æœ‰äº†æ–°çš„ç†è§£ï¼Œæ‰€ä»¥å°±æ¥æ›´æ–°ä¸€ä¸‹ã€‚</p><p>åœ¨çœ‹çº¢å®ä¹¦çš„æ—¶å€™çœ‹åˆ°ä¸€å¥å…³äºå¯¹ Promise çš„æè¿°ï¼š<code>æ”¯æŒä¼˜é›…çš„å®šä¹‰å’Œç»„ç»‡å¼‚æ­¥é€»è¾‘</code>ã€‚</p><p>è™½ç„¶è¿˜åœ¨çº ç»“ Promise è¿™ç©æ„çš„æ„ä¹‰ï¼Œä½†æ˜¯çªç„¶å°±è”æƒ³åˆ°äº†ä¸Šé¢çš„äº‹ä¾‹ï¼Œæœ‰äº†æ–°çš„è§£å†³æ–¹å¼ã€‚ç”¨ setTimeout è§£å†³å®åœ¨ä¸å¤Ÿä¼˜é›…ï¼Œè€Œä¸”è¿˜ä¸èƒ½ç¡®å®šè¿™ä¸ªæ—¶é—´ã€‚</p><p>å…¶å®å¯ä»¥è¿™æ ·å­æ¥å¤„ç† close äº‹ä»¶ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">handleData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token literal-property property">input</span><span class="token operator">:</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span><span class="token string">&quot;file.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
		rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;line&quot;</span><span class="token punctuation">,</span> <span class="token parameter">line</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			obj<span class="token punctuation">[</span>line<span class="token punctuation">]</span> <span class="token operator">=</span> line<span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

		rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;close&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">await</span> <span class="token function">updateData</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç”¨ Promise åŒ…è£¹è¿™ä¸€æ®µå¤„ç†é€»è¾‘ï¼Œæ ¸å¿ƒæ˜¯ç”¨åˆ°äº† Promise çš„ resolve æ€æƒ³ï¼Œç­‰å¾… close æ—¶é—´æ¢³ç†å®Œæ¯•çš„æ—¶å€™ï¼Œå†å°†è¿™ä¸ªå¤„ç†é€»è¾‘çš„çŠ¶æ€æ”¹ä¸ºå®Œæˆï¼Œè¿™æ ·å­å°±å¯ä»¥åœ¨å¤–éƒ¨ä½¿ç”¨ await æ¥ç­‰å¾…è¿™ä¸ªå¤„ç†é€»è¾‘çš„å®Œæˆã€‚</p><p>ä¼˜é›…ï¼Œå±å®ä¼˜é›…ï¼ŒçœŸçš„å¤ªä¼˜é›…äº†ã€‚</p><p>ä½†æ˜¯å…³äº Promise å’Œå¼‚æ­¥ç¼–ç¨‹ï¼Œåœ¨æˆ‘å¿ƒé‡Œé¢è¿˜æœ‰æœ‰ä¸€å°å—ç–™ç˜©ï¼Œæ€»æ„Ÿè§‰ä½¿ä¸ä¸ŠåŠ²ã€‚ã€‚ã€‚</p><p>æœŸå¾…åé¢çš„ä¸€ç‚¹ç‚¹è§£å†³å§ã€‚</p><p><strong>5.30 æ›´æ–°</strong></p><p>è§£å†³äº†ï¼Œç»ˆäºè§£å†³äº†ã€‚å‡ºé”™çš„åŸå› åœ¨å‰ç«¯ä¼ å‚æ•°çš„æ—¶å€™ä¼ äº†ä¸€ä¸ªç©ºçš„ model_configï¼Œåç«¯åœ¨è¿™ä¸ªåœ°æ–¹çš„æ—¶å€™æŠ¥é”™äº†ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">class</span> <span class="token class-name">xxx</span> <span class="token punctuation">{</span>
	<span class="token comment">//éªŒè¯ä¸­é—´æ¨¡å‹</span>
	<span class="token function-variable function">evalMiddleModel</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>option<span class="token operator">:</span> CreatTrainQueue<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">try</span> <span class="token punctuation">{</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>funMap<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token constant">EVAL_KEY</span><span class="token punctuation">,</span> EvalStatus<span class="token punctuation">.</span><span class="token constant">PAD</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;start eval middle model...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">const</span> TrainData <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleMiddleModelOrEvalDataset</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">goEval</span><span class="token punctuation">(</span>TrainData <span class="token keyword">as</span> TrainData<span class="token punctuation">,</span> option<span class="token punctuation">.</span>model_path<span class="token punctuation">)</span><span class="token punctuation">;</span>

			<span class="token keyword">return</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token punctuation">{</span> status<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>

	handleMiddleModelOrEvalDataset <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>model_id <span class="token operator">=</span> option<span class="token punctuation">.</span>model_id<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>model_type_id <span class="token operator">=</span> option<span class="token punctuation">.</span>model_type_id<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>model_path <span class="token operator">=</span> option<span class="token punctuation">.</span>model_path<span class="token punctuation">;</span>
		<span class="token keyword">const</span> evalOption <span class="token operator">=</span> <span class="token punctuation">{</span>
			evalType<span class="token operator">:</span> option<span class="token punctuation">.</span>model_config<span class="token punctuation">.</span>eval_type<span class="token punctuation">,</span><span class="token comment">//model_configä¸ºnullï¼ŒæŠ¥é”™äº†</span>
			divide<span class="token operator">:</span> option<span class="token punctuation">.</span>model_config<span class="token punctuation">.</span>divide<span class="token punctuation">,</span>
			evalProject<span class="token operator">:</span> option<span class="token punctuation">.</span>model_config<span class="token punctuation">.</span>eval_project<span class="token punctuation">,</span>
			evalClass<span class="token operator">:</span> option<span class="token punctuation">.</span>model_config<span class="token punctuation">.</span>eval_classes<span class="token punctuation">,</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">const</span> <span class="token punctuation">{</span> model_type_id<span class="token punctuation">,</span> model_path <span class="token punctuation">}</span> <span class="token operator">=</span> option<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‰ç«¯ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p><div class="language-typescript line-numbers-mode" data-ext="ts"><pre class="language-typescript"><code><span class="token keyword">const</span> model_config <span class="token operator">=</span> <span class="token keyword">typeof</span> modelInfo<span class="token punctuation">.</span>model_config <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span> <span class="token operator">?</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>modelInfo<span class="token punctuation">.</span>model_config<span class="token punctuation">)</span> <span class="token operator">:</span> modelInfo<span class="token punctuation">.</span>model_config<span class="token punctuation">;</span>
<span class="token comment">// æŸ¥çœ‹æµ‹è¯•ç»“æœ</span>
<span class="token keyword">const</span> option<span class="token operator">:</span> PostData<span class="token punctuation">[</span><span class="token string">&quot;createTrainQueue&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token operator">...</span>modelInfo<span class="token punctuation">,</span>
	model_id<span class="token operator">:</span> modelInfo<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
	sample_img_path<span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
	task_type<span class="token operator">:</span> <span class="token string">&quot;continue&quot;</span><span class="token punctuation">,</span>
	model_config<span class="token operator">:</span> model_config<span class="token punctuation">,</span>
	sampleConfig<span class="token operator">:</span> model_config<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> stopResult <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">stopTrainQueue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//åœæ­¢</span>
eventBus<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;getModelList&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> needEval <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getMiddleModelNeedEval</span><span class="token punctuation">(</span><span class="token punctuation">{</span> model_id<span class="token operator">:</span> modelInfo<span class="token punctuation">.</span>id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;needEval&quot;</span><span class="token punctuation">,</span> needEval<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>needEval<span class="token punctuation">.</span>status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setEvalLoading</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">await</span> <span class="token function">evalModel</span><span class="token punctuation">(</span>option<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">repeatGetEvalStatus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»Šå¤©æŠŠå‰é¢è¯´çš„<code>appendFile</code>å›è°ƒé‡Œé¢çš„<code>rl.on(&#39;close&#39;)</code>ç»™åˆ æ‰äº†ï¼Œæ”¹æˆäº†åŒæ­¥çš„ä»£ç ï¼Œå°±èƒ½å¤Ÿç™¾åˆ†ä¹‹ç™¾çš„å¤ç°äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯åœ¨ç¬¬ä¸€æ¬¡èµ°éªŒè¯çš„æ—¶å€™ä¼šè§¦å‘ã€‚æ˜¯å› ä¸ºæ‰§è¡Œ<code>evalType: option.model_config.eval_type</code>è¿™é‡Œä»£ç çš„æ—¶å€™æŠ¥é”™äº†ï¼Œç„¶åæˆ‘çš„trycatchåœ¨æŠ¥é”™çš„æ—¶å€™åˆæ²¡æœ‰æ‰“å°æ—¥å¿—ï¼Œæ‰€ä»¥é€ æˆäº†æˆ‘çš„è¯¯è§£ï¼Œæˆ‘è¿˜ä¸€ç›´ä»¥ä¸ºæ˜¯å› ä¸ºä»»åŠ¡é˜Ÿåˆ—ä¸­è¿”å›çš„æ¶ˆæ¯ç»™å‡½æ•°æ‰§è¡Œæ‰“æ–­äº†ã€‚</p><p>ç°åœ¨æ‰¾åˆ°äº†ä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Œå†æ¥æ€è€ƒä¸€ä¸‹ğŸ¤”ä¸ºä»€ä¹ˆä¹‹å‰ç”¨å¼‚æ­¥çš„æ—¶å€™æ˜¯å¶ç„¶å‡ºç°è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿ</p><p>æš‚æ—¶ä¸æ˜¯å¾ˆç¡®å®šï¼Œæ˜å¤©å†å¥½å¥½æ€è€ƒç¡®è®¤ä¸€ä¸‹</p>`,69);function f(g,w){const a=i("RouterLink");return p(),e("div",null,[k,d,n("ul",null,[r,n("li",null,[v,n("p",null,[s("ä¸ä¼šç«‹é©¬è¿›å…¥ä¸»çº¿ç¨‹ï¼Œè€Œæ˜¯å…ˆè¿›å…¥ä»»åŠ¡é˜Ÿåˆ—çš„ä»»åŠ¡ï¼Œåªæœ‰ä»»åŠ¡é˜Ÿåˆ—é€šçŸ¥ä¸»çº¿ç¨‹ï¼ŒæŸä¸ªå¼‚æ­¥ä»»åŠ¡å¯ä»¥æ‰§è¡Œäº†ï¼Œä»»åŠ¡æ‰ä¼šè¿›å…¥ä¸»çº¿ç¨‹å»æ‰§è¡Œã€‚å…·ä½“è§"),o(a,{to:"/study/frontend/js/js-async.html"},{default:c(()=>[s("å¦‚ä½•ç†è§£ JS çš„å¼‚æ­¥")]),_:1})])]),m,b]),y])}const _=t(u,[["render",f],["__file","event-loop.html.vue"]]);export{_ as default};
